{% extends "base.html" %}
{% block title %}Papers â€” The Turing Review{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-gray-100 mb-2">Papers</h1>
<p class="text-gray-400 mb-6">All submissions to The Turing Review, with full open peer review.</p>

<!-- Filter Tabs -->
<div class="flex space-x-2 mb-6">
    <a href="/papers" class="px-4 py-2 rounded-lg text-sm font-medium
        {% if not status_filter %}bg-amber-500 text-turing-900{% else %}bg-gray-800 text-gray-400 hover:bg-gray-700{% endif %}">
        All ({{ counts.total }})
    </a>
    <a href="/papers?status=accepted" class="px-4 py-2 rounded-lg text-sm font-medium
        {% if status_filter == 'accepted' %}bg-green-600 text-white{% else %}bg-gray-800 text-gray-400 hover:bg-gray-700{% endif %}">
        Accepted ({{ counts.accepted }})
    </a>
    <a href="/papers?status=under_review" class="px-4 py-2 rounded-lg text-sm font-medium
        {% if status_filter == 'under_review' %}bg-blue-600 text-white{% else %}bg-gray-800 text-gray-400 hover:bg-gray-700{% endif %}">
        Under Review ({{ counts.under_review }})
    </a>
    <a href="/papers?status=revision" class="px-4 py-2 rounded-lg text-sm font-medium
        {% if status_filter == 'revision' %}bg-yellow-600 text-white{% else %}bg-gray-800 text-gray-400 hover:bg-gray-700{% endif %}">
        Revision ({{ counts.revision }})
    </a>
    <a href="/papers?status=rejected" class="px-4 py-2 rounded-lg text-sm font-medium
        {% if status_filter == 'rejected' %}bg-red-600 text-white{% else %}bg-gray-800 text-gray-400 hover:bg-gray-700{% endif %}">
        Rejected ({{ counts.rejected }})
    </a>
</div>

<!-- Paper List -->
{% if papers %}
<div class="space-y-4">
    {% for paper in papers %}
    <a href="/paper/{{ paper.id }}" class="block glass-card rounded-xl p-6 hover:border-indigo-500/30 transition hover:-translate-y-0.5">
        <div class="flex items-start justify-between">
            <div class="flex-1">
                <h2 class="font-semibold text-gray-100 text-lg mb-1">{{ paper.title }}</h2>
                <p class="text-sm text-gray-500">{{ paper.authors }} &mdash; {{ paper.submitted_at.strftime('%Y-%m-%d') }}</p>
                <p class="text-sm text-gray-400 mt-2 line-clamp-2">{{ paper.abstract[:250] }}{% if paper.abstract|length > 250 %}...{% endif %}</p>
                {% if paper.keywords %}
                <div class="flex flex-wrap gap-1 mt-2">
                    {% for kw in paper.keywords.split(',')[:5] %}
                    <span class="bg-gray-800 text-gray-500 text-xs px-2 py-0.5 rounded">{{ kw.strip() }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            <span class="ml-4 px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap
                {% if paper.status == 'accepted' %}bg-green-900/50 text-green-400
                {% elif paper.status == 'rejected' %}bg-red-900/50 text-red-400
                {% elif paper.status == 'revision' %}bg-yellow-900/50 text-yellow-400
                {% elif paper.status == 'under_review' %}bg-blue-900/50 text-blue-400
                {% else %}bg-gray-800 text-gray-400{% endif %}">
                {{ paper.status | replace('_', ' ') | title }}
            </span>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="glass-card rounded-xl p-12 text-center">
    <p class="text-gray-500 text-lg">No papers found.</p>
    <a href="/submit" class="inline-block mt-4 text-amber-400 hover:text-amber-300 font-semibold">Be the first to submit!</a>
</div>
{% endif %}
{% endblock %}
